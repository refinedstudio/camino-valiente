---
import ImageCarousel from "../../../../../shared/image_carousel/index.tsx";

interface Image {
  url: string;
  alt: string;
}

interface Props {
  id: string;
  location: string;
  subtitle: string;
  title: string;
  description: string;
  imageUrl: string;
  imageAlt: string;
  isReversed?: boolean;
  isCarousel?: boolean;
  images?: Image[];
}

const {
  id,
  location,
  subtitle,
  title,
  description,
  imageUrl,
  imageAlt,
  isReversed = false,
  isCarousel = false,
  images = [],
} = Astro.props;

const defaultCarouselImages: Image[] = [
  {
    url: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=600&fit=crop",
    alt: "Paisaje montañoso",
  },
  {
    url: "https://images.unsplash.com/photo-1472214103451-9374bd1c798e?w=800&h=600&fit=crop",
    alt: "Sendero en el bosque",
  },
  {
    url: "https://images.unsplash.com/photo-1464822759844-d150baec0494?w=800&h=600&fit=crop",
    alt: "Vista panorámica",
  },
  {
    url: "https://images.unsplash.com/photo-1493246507139-91e8fad9978e?w=800&h=600&fit=crop",
    alt: "Aventura en la naturaleza",
  },
];

const finalImages = images.length > 0 ? images : defaultCarouselImages;
---

<div
  class:list={[
    "w-full",
    "flex",
    "flex-col",
    "md:flex-row",
    "relative",
    "mb-16",
    "mt-24",
    "md:gap-24",
    "gap-16",
    "animated-card",
  ]}
>
  {
    !isReversed && (
      <div
        class="w-full md:w-1/2 h-[500px] sm:h-[720px] md:h-screen relative"
        data-reversed="false"
      >
        <img
          loading="lazy"
          src={imageUrl}
          alt={imageAlt}
          class:list={["object-cover", "h-full", "w-full", "card-image"]}
        />
      </div>
    )
  }

  <div
    class="w-full md:w-1/2 relative h-full md:h-screen flex items-center justify-center"
  >
    <div
      class:list={[
        "w-full",
        "md:max-w-3xl",
        "mx-auto",
        "p-4",
        "md:p-8",
        "flex",
        "flex-col",
        "justify-center",
        "card-text-content",
      ]}
    >
      <p class="uppercase text-sm tracking-widest text-center mb-4">
        {location}
      </p>
      <h2
        class="text-2xl sm:text-4xl md:text-5xl font-playfair-display text-center mb-1 uppercase text-neutral-950"
      >
        {subtitle}
      </h2>
      <h2
        class="text-2xl sm:text-4xl md:text-5xl font-bold text-center mb-6 uppercase text-neutral-950"
      >
        {title}
      </h2>

      <div class="sm:px-8 text-center">
        {
          isCarousel && finalImages.length >= 3 ? (
            <p class="text-neutral-600 leading-relaxed mb-4 text-sm sm:text-base font-light">
              {description}
            </p>
          ) : (
            <ImageCarousel
              images={finalImages}
              className="h-full w-full"
              showNavigation={true}
              showPagination={true}
              autoplay={true}
              autoplayDelay={4000}
              client:load
            />
          )
        }
      </div>

      <div class="flex justify-center mt-8">
        <a
          target="_blank"
          href={`/${id}`}
          class="bg-neutral-950 hover:bg-neutral-700 transition-colors duration-300 text-white px-10 py-3 text-sm tracking-tight cursor-pointer font-playfair-display font-medium sm:text-base"
        >
          LEER MÁS
        </a>
      </div>
    </div>
  </div>

  {
    isReversed && (
      <div
        class="w-full md:w-1/2 h-[500px] sm:h-[720px] md:h-screen relative order-first md:order-last"
        data-reversed="true"
      >
        <img
          loading="lazy"
          src={imageUrl}
          alt={imageAlt}
          class:list={["object-cover", "h-full", "w-full", "card-image"]}
        />
      </div>
    )
  }
</div>
